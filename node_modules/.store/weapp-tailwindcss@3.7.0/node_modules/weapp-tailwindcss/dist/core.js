'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var options = require('./options-Bv-1GQJY.js');
require('lru-cache');
require('md5');
require('./defaults-CdqzSWsR.js');
require('@ast-core/escape');
require('@weapp-core/escape');
require('./defu-Cdz2PomB.js');
require('magic-string');
require('@babel/generator');
require('@babel/traverse');
require('@babel/parser');
require('consola');
require('@weapp-core/regex');
require('./replace.js');
require('./shared-r_GpWheO.js');
require('@tailwindcss-mangle/shared');
require('postcss');
require('./index-h2-ZMO3S.js');
require('@csstools/postcss-is-pseudo-class');
require('postcss-rem-to-responsive-pixel');
require('postcss-selector-parser');
require('node:path');
require('node:process');
require('tailwindcss-patch');
require('@babel/types');
require('htmlparser2');

function createContext(options$1 = {}) {
    const opts = options.getOptions(options$1);
    const { templateHandler, styleHandler, patch, jsHandler, twPatcher } = opts;
    let runtimeSet = new Set();
    patch === null || patch === void 0 ? void 0 : patch();
    function transformWxss(rawCss, options) {
        return styleHandler(rawCss, Object.assign({
            isMainChunk: true,
        }, options));
    }
    function transformJs(rawJs, options = {}) {
        runtimeSet
            = options && options.runtimeSet
                ? options.runtimeSet
                : twPatcher.getClassSet();
        return jsHandler(rawJs, runtimeSet, options);
    }
    function transformWxml(rawWxml, options) {
        return templateHandler(rawWxml, Object.assign({
            runtimeSet,
        }, options));
    }
    return {
        transformWxss,
        transformWxml,
        transformJs,
    };
}

exports.createContext = createContext;
