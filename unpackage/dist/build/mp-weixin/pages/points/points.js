"use strict";const e=require("../../common/vendor.js"),i=require("../../utils/require.js");require("../../config.js");const t={__name:"points",setup(t){const s=e.ref(2899),a=e.ref([{id:1,name:"游泳距离达到500米",points:50,completed:!0,icon:"/static/icons/points-swim-500.png",iconClass:"blue"},{id:2,name:"游泳距离达到1000米",points:100,completed:!1,icon:"/static/icons/points-swim-1000.png",iconClass:"yellow"},{id:3,name:"发布动态(0/1)",points:20,completed:!1,icon:"/static/icons/points-post.png",iconClass:"pink"},{id:4,name:"分享游泳数据(0/1)",points:30,completed:!1,icon:"/static/icons/points-share.png",iconClass:"purple"}]),n=e.ref([{id:1,name:"焦动XXXXXX",points:5e3,image:"/static/avatar2.jpg"},{id:2,name:"焦动XXXXXX",points:2e3,image:"/static/avatar2.jpg"}]),o=()=>{e.index.navigateTo({url:"/pages/points/details"})};return(t,c)=>({a:e.o(o),b:e.t(s.value),c:e.f(a.value,((i,t,s)=>({a:i.icon,b:e.n(i.iconClass),c:e.t(i.name),d:e.t(i.points),e:e.t(i.completed?"已完成":"去完成"),f:i.completed?1:"",g:e.o((t=>(async i=>{if(!i.completed)switch(i.id){case 1:case 2:e.index.navigateTo({url:"/pages/swimming/index"});break;case 3:e.index.navigateTo({url:"/pages/post/create"});break;case 4:e.index.navigateTo({url:"/pages/share/index"})}})(i)),i.id),h:i.id}))),d:e.f(n.value,((t,a,n)=>({a:t.image,b:e.t(t.name),c:e.t(t.points),d:e.t(s.value>=t.points?"立即兑换":"积分不足"),e:s.value<t.points?1:"",f:e.o((a=>(async t=>{if(s.value<t.points)e.index.showToast({title:"积分不足",icon:"none"});else try{200===(await i.request({url:"/points/exchange",method:"POST",data:{itemId:t.id}})).statusCode&&(e.index.showToast({title:"兑换成功",icon:"success"}),s.value-=t.points)}catch(a){e.index.showToast({title:"兑换失败",icon:"error"})}})(t)),t.id),g:t.id})))})}},s=e._export_sfc(t,[["__scopeId","data-v-7376ca6d"]]);wx.createPage(s);
