"use strict";const e=require("../../../common/vendor.js"),t=require("../../../utils/require.js"),a=require("./format.js");require("../../../config.js"),Math||l();const l=()=>"./YearPicker.js",r={__name:"YearView",props:{initialDate:{type:String,default:()=>a.formatDate(new Date).slice(0,4)}},setup(l){const r=l,o=e.ref(r.initialDate),n=e.ref(null),u=e.computed((()=>{var e,t;return(null==(t=null==(e=n.value)?void 0:e.monthlyRecords)?void 0:t.length)?[...new Set(n.value.monthlyRecords.map((e=>new Date(e.month).getFullYear())))]:[]})),i=e=>{const t=new Date(e);return`${t.getFullYear()}年${t.getMonth()+1}月`},s=async e=>{var a;try{const l=await t.request({url:"/swimming/year-records",method:"GET",data:{year:e}});200===(null==(a=l.data)?void 0:a.code)&&(n.value=l.data.data)}catch(l){console.error("获取年度数据失败:",l),n.value=null}},c=e=>{e&&(o.value=e,s(new Date(e).getFullYear()))};return e.onMounted((()=>{s(new Date(o.value).getFullYear())})),(t,l)=>{var r,s,v,d,m,h;return e.e({a:e.o(c),b:e.o((e=>o.value=e)),c:e.p({"record-years":u.value,value:o.value}),d:null==(r=n.value)?void 0:r.totals},(null==(s=n.value)?void 0:s.totals)?{e:e.t(n.value.totals.totalDistance||0),f:e.t(e.unref(a.formatDuration)(n.value.totals.totalDuration))}:{},{g:null==(d=null==(v=n.value)?void 0:v.monthlyRecords)?void 0:d.length},(null==(h=null==(m=n.value)?void 0:m.monthlyRecords)?void 0:h.length)?{h:e.f(n.value.monthlyRecords,((t,l,r)=>({a:e.t(i(t.month)),b:e.t(t.distance||0),c:e.t(e.unref(a.formatDuration)(t.duration)),d:e.t(e.unref(a.formatPace)(t.averagePace)),e:e.t(t.calories||0),f:e.t(t.trainingCount||0),g:e.t(t.totalLaps||0),h:t.month})))}:{})}}};wx.createComponent(r);
