"use strict";const e=require("../../../common/vendor.js"),t=require("../../../utils/require.js"),a=require("./format.js");require("../../../config.js"),Math||l();const l=()=>"./MonthPicker.js",o={__name:"MonthView",props:{initialDate:{type:String,default:()=>a.formatDate(new Date)}},setup(l){const o=l,n=e.ref(o.initialDate),r=e.ref(null),u=e.computed((()=>{var e,t;return(null==(t=null==(e=r.value)?void 0:e.dailyRecords)?void 0:t.length)?[...new Set(r.value.dailyRecords.map((e=>new Date(e.date).getMonth()+1)))]:[]})),i=e=>{const t=new Date(e);return`${t.getFullYear()}年${t.getMonth()+1}月${t.getDate()}日`},d=async e=>{var a;const l=e.getFullYear(),o=e.getMonth()+1;try{const e=await t.request({url:"/swimming/month-records",method:"GET",data:{year:l,month:o}});200===(null==(a=e.data)?void 0:a.code)&&(r.value=e.data.data)}catch(n){console.error("获取月度数据失败:",n),r.value=null}},s=e=>{e&&(n.value=e,d(new Date(e)))};return e.onMounted((()=>{d(new Date(n.value))})),(t,l)=>{var o,d,c,v,h,m;return e.e({a:e.o(s),b:e.o((e=>n.value=e)),c:e.p({"record-months":u.value,value:n.value}),d:null==(o=r.value)?void 0:o.totals},(null==(d=r.value)?void 0:d.totals)?{e:e.t(r.value.totals.totalDistance||0),f:e.t(e.unref(a.formatDuration)(r.value.totals.totalDuration))}:{},{g:null==(v=null==(c=r.value)?void 0:c.dailyRecords)?void 0:v.length},(null==(m=null==(h=r.value)?void 0:h.dailyRecords)?void 0:m.length)?{h:e.f(r.value.dailyRecords,((t,l,o)=>({a:e.t(i(t.date)),b:e.t(t.distance||0),c:e.t(e.unref(a.formatDuration)(t.duration)),d:e.t(e.unref(a.formatPace)(t.averagePace)),e:e.t(t.calories||0),f:e.t(t.poolLength||0),g:e.t(t.laps||0),h:t.date})))}:{})}}};wx.createComponent(o);
