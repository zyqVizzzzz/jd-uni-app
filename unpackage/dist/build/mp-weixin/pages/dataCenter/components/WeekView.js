"use strict";const e=require("../../../common/vendor.js"),t=require("../../../utils/require.js"),a=require("./format.js");if(require("../../../config.js"),!Array){e.resolveComponent("uni-calendar")()}Math;const r={__name:"WeekView",props:{initialDate:{type:String,default:()=>a.formatDate(new Date)}},setup(r){const n=r,l=e.ref(n.initialDate),o=e.ref(null);e.ref([]);const u=e.ref([]),d=e=>{const t=new Date(e),r=t.getDay()||7,n=new Date(t);n.setDate(t.getDate()-r+1);const l=[];for(let o=0;o<7;o++){const e=new Date(n);e.setDate(n.getDate()+o),l.push({date:a.formatDate(e),extra:"week"})}return l},s=e=>{const t=d(e);return{start:t[0].date,end:t[6].date}},i=e=>{const t=new Date(e);return`${t.getMonth()+1}月${t.getDate()}日`},c=async(e,a)=>{var r;try{const n=await t.request({url:"/swimming/week-record",method:"GET",data:{startDate:e,endDate:a}});200===(null==(r=n.data)?void 0:r.code)?(o.value=n.data.data.totals,o.value.dailyRecords=n.data.data.daily):o.value=null}catch(n){console.error("获取周数据失败",n),o.value=null}},v=e=>{if(!(null==e?void 0:e.fulldate))return;l.value=e.fulldate,u.value=d(e.fulldate);const t=s(e.fulldate);c(t.start,t.end)},f=e=>{};return e.onMounted((()=>{const e=l.value;u.value=d(e);const t=s(e);c(t.start,t.end)})),(t,r)=>{var n,d,s,c;return e.e({a:e.o(v),b:e.o(f),c:e.p({insert:!0,selected:u.value,date:l.value,showMonth:!1}),d:o.value},o.value?{e:e.t(o.value.totalDistance||0),f:e.t(e.unref(a.formatDuration)(o.value.totalDuration))}:{},{g:null==(d=null==(n=o.value)?void 0:n.dailyRecords)?void 0:d.length},(null==(c=null==(s=o.value)?void 0:s.dailyRecords)?void 0:c.length)?{h:e.f(o.value.dailyRecords,((t,r,n)=>({a:e.t(i(t.date)),b:e.t(t.distance||0),c:e.t(e.unref(a.formatDuration)(t.duration)),d:e.t(e.unref(a.formatPace)(t.averagePace)),e:e.t(t.calories||0),f:e.t(t.poolLength||0),g:e.t(t.laps||0),h:t.date})))}:{})}}},n=e._export_sfc(r,[["__scopeId","data-v-12435575"]]);wx.createComponent(n);
